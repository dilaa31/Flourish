<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Daily Routine | Flourish</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
  background:#f3f8f4;
  font-family:'Segoe UI', sans-serif;
}
.container{
  margin-left:230px;
}

/* CARD */
.card{
  background:#ffffff;
  border-radius:22px;
  padding:26px;
  border:1px solid #e3eee8;
  margin-bottom:24px;
}

/* PROGRESS */
.progress-box{
  background:#eef6f1;
  border-radius:16px;
  height:18px;
  overflow:hidden;
}
.progress-fill{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#7fc7a2,#a6e3c4);
  transition:.3s;
}

.check-item{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:10px;
  font-size:14px;
}

.section-title{
  font-weight:700;
  margin-bottom:12px;
}
.small-note{
  font-size:13px;
  color:#6a7b72;
}

.history-list li{
  font-size:14px;
  margin-bottom:6px;
}
</style>
</head>

<body>

<div class="container py-5">

  <!-- BACK -->
  <a href="Lifestyle.html" class="btn btn-outline-success btn-sm mb-4">
    â† Kembali ke Lifestyle
  </a>

  <!-- HEADER -->
  <div class="mb-4">
    <h2>ğŸŒ¿ Daily Routine</h2>
    <p class="text-muted">
      Rutinitas harian untuk wajah, tubuh, dan rambut.
      Lakukan pelan-pelan, konsisten, dan realistis.
    </p>
  </div>

  <!-- PROGRESS -->
  <div class="card">
    <h5>ğŸ“Š Progress Hari Ini</h5>
    <div class="progress-box my-2">
      <div class="progress-fill" id="progressFill"></div>
    </div>
    <small id="progressText" class="small-note">0% selesai hari ini</small>
  </div>

  <!-- MORNING -->
  <div class="card">
    <h5 class="section-title">ğŸŒ Morning Routine</h5>

    <b>Face Care</b>
    <div class="check-item"><input type="checkbox"> Gentle cleanser</div>
    <div class="check-item"><input type="checkbox"> Toner (hydrating / calming)</div>
    <div class="check-item"><input type="checkbox"> Serum ringan</div>
    <div class="check-item"><input type="checkbox"> Moisturizer</div>
    <div class="check-item"><input type="checkbox"> Sunscreen SPF 30â€“50</div>

    <b class="mt-3 d-block">Body Care</b>
    <div class="check-item"><input type="checkbox"> Shower</div>
    <div class="check-item"><input type="checkbox"> Body lotion / serum</div>

    <b class="mt-3 d-block">Hair Care</b>
    <div class="check-item"><input type="checkbox"> Leave-in / hair mist</div>
  </div>

  <!-- NIGHT -->
  <div class="card">
    <h5 class="section-title">ğŸŒ™ Night Routine</h5>

    <b>Face Care</b>
    <div class="check-item"><input type="checkbox"> Cleansing oil / micellar</div>
    <div class="check-item"><input type="checkbox"> Facial wash</div>
    <div class="check-item"><input type="checkbox"> Toner</div>
    <div class="check-item"><input type="checkbox"> Treatment serum</div>
    <div class="check-item"><input type="checkbox"> Moisturizer / sleeping mask</div>

    <b class="mt-3 d-block">Body & Hair</b>
    <div class="check-item"><input type="checkbox"> Body lotion rich</div>
    <div class="check-item"><input type="checkbox"> Hair oil / serum</div>
  </div>

  <!-- WEEKLY -->
  <div class="card">
    <h5 class="section-title">ğŸ“… Weekly Routine</h5>

    <div class="check-item"><input type="checkbox"> Exfoliation wajah</div>
    <div class="check-item"><input type="checkbox"> Masker wajah</div>
    <div class="check-item"><input type="checkbox"> Body scrub</div>
    <div class="check-item"><input type="checkbox"> Hair mask / creambath</div>
  </div>

  <!-- SAVE -->
  <div class="card text-center">
    <button onclick="saveRoutine()" class="btn btn-success">
      ğŸ’¾ Simpan Rutinitas Hari Ini
    </button>
    <p class="small-note mt-2">
      Data disimpan otomatis berdasarkan tanggal
    </p>
  </div>

  <!-- HISTORY -->
  <div class="card">
    <h5>ğŸ—‚ Riwayat Rutinitas</h5>
    <ul id="historyList" class="history-list"></ul>
  </div>

</div>

<script>
const checkboxes = document.querySelectorAll("input[type='checkbox']");
const progressFill = document.getElementById("progressFill");
const progressText = document.getElementById("progressText");
const historyList = document.getElementById("historyList");

function updateProgress(){
  const total = checkboxes.length;
  const checked = document.querySelectorAll("input[type='checkbox']:checked").length;
  const percent = Math.round((checked / total) * 100);

  progressFill.style.width = percent + "%";
  progressText.innerText = percent + "% selesai hari ini";

  return { checked, total, percent };
}

function saveRoutine(){
  const today = new Date().toISOString().split("T")[0];
  const progress = updateProgress();

  let history = JSON.parse(localStorage.getItem("dailyRoutineHistory")) || [];

  history = history.filter(h => h.date !== today);

  history.push({
    date: today,
    completed: progress.checked,
    total: progress.total,
    percent: progress.percent
  });

  localStorage.setItem("dailyRoutineHistory", JSON.stringify(history));
  renderHistory();
  alert("Rutinitas hari ini tersimpan ğŸŒ±");
}

function renderHistory(){
  const history = JSON.parse(localStorage.getItem("dailyRoutineHistory")) || [];
  historyList.innerHTML = "";

  if(history.length === 0){
    historyList.innerHTML = "<li>Belum ada riwayat</li>";
    return;
  }

  history.slice().reverse().forEach(h=>{
    const li = document.createElement("li");
    li.innerHTML = `<b>${h.date}</b> â€” ${h.completed}/${h.total} (${h.percent}%)`;
    historyList.appendChild(li);
  });
}

checkboxes.forEach(cb=>{
  cb.addEventListener("change", updateProgress);
});

updateProgress();
renderHistory();
</script>

</body>
</html>
